<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background-color: black;
        }
    </style>
</head>
<body>
    <canvas id="pinwheels"></canvas>
    <script>
        const canvas = document.getElementById('pinwheels');
        const ctx = canvas.getContext('2d');
        const numPinwheels = 30;
        const pinwheels = [];
        const numLayers = 10;
        const dotSize = 5;
        const rotationSpeed = 0.02;
        const mergeProbability = 0.02;
        const repelRadius = 90;
        const stopTime = 23000; // 23 seconds in milliseconds
        const returnTime = 44000; // 44 seconds in milliseconds
        let scatterMode = false;

        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        class Pinwheel {
            constructor(x, y) {
                this.x = x;
                this.y = y;
                this.radius = 40;
                this.segments = 18;
                this.bounceFactor = 10;
                this.bounceFactorX = 5;
                this.speedX = (Math.random() - 0.5) * 2;
                this.speedY = (Math.random() - 0.5) * 2;
                this.angles = new Array(numLayers).fill(0);
                this.direction = [-1, 1, -1, 1];
                this.merged = false;
                this.scatterX = (Math.random() - 0.5) * 2;
                this.scatterY = (Math.random() - 0.5) * 2;
                this.scatterSpeedY = -0.5; // Speed for rising up
            }

            draw() {
                if (scatterMode) {
                    this.x += this.scatterX;
                    this.y += this.scatterY;
                    this.scatterY +=
